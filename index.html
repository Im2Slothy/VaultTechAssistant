<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vault-Tec Assistant - Fallout Discord Bot</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="stylesheet" href="index.css">
</head>
<body>
    <header>
        <h1>Vault-Tec Assistant</h1>
        <p>Your Essential Fallout-Styled Companion for Discord!</p>
        <nav class="main-nav">
            <a class="button" href="https://discord.com/oauth2/authorize?client_id=1107428963246166026" target="_blank">Invite to Server</a>
            <a class="button button-alt" href="https://discord.gg/RQBhmWEzTx" target="_blank">Join Support Server</a>
        </nav>
    </header>

    <main>
        <section class="intro">
            <h2>Welcome to the Wasteland, Dweller!</h2>
            <p>The Vault-Tec Assistant is here to bring a rich slice of the Fallout universe directly to your Discord server. Get ready for an immersive, persistent experience with minigames, iconic radio stations, a full in-game economy, and now... player-run settlements!</p>
            <p>Whether you're a seasoned wasteland wanderer or a fresh vault escapee, there's something here for you.</p>
        </section>

        <section class="live-stats">
            <h2>Live Bot Statistics</h2>
            <div class="gallery-container" id="stats-container">
                <div class="gallery-item">
                    <h3 style="margin-bottom: 15px;">Most Popular Commands</h3>
                    <ul id="popular-commands-list">
                        <li id="loading-commands">Connecting to the Wasteland...</li>
                    </ul>
                </div>
    
                <div class="gallery-item">
                    <h3 style="margin-bottom: 15px;">Radio Station Popularity</h3>
                    <ol id="station-popularity-list">
                        <li id="loading-radio">Tuning the frequencies...</li>
                    </ol>
                </div>
            </div>
            <p class="gallery-note">*Stats are updated live from the bot's database via API.</p>
        </section>
        
        <section class="features">
            <h2>Key Features</h2>
            <ul>
                <li>üèïÔ∏è **Build Your Settlement:** Found your own settlement with `/settlement create`! Manage resources, build & upgrade structures, and grow your population. Defend against raiders and compete on the settlement leaderboards.</li>
                <li>‚öîÔ∏è **PVE & Boss Battles:** Fight wasteland creatures with `/pve_encounter` or launch a nuke with `/nukelaunch start` to battle legendary bosses like the Scorchbeast Queen for rare loot.</li>
                <li>üè™ **Player Vending:** Set up your own shop with `/vending manage` to sell your items to other players. Browse all active player shops with `/browse_shops`.</li>
                <li>ü§ù **Player-to-Player Trading:** Use the secure `/trade` command to exchange items and caps directly with other survivors.</li>
                <li>ü§ñ **Gear & Pet System:** Find, craft, and equip a huge variety of weapons and Power Armor. Tame wasteland creatures like Deathclaws or Radstags to follow you as pets!</li>
                <li>‚ò¢Ô∏è **Terminal & Lockpicking:** Test your skills against ROBCO terminals with `/terminal` or use bobby pins to crack locks with `/lockpick`.</li>
                <li>üé≤ **Wasteland Gambling:** From `/slots` and `/roulette` to `/blackjack` and `/radroach_race`, there are plenty of ways to win (or lose) a fortune.</li>
                <li>üìª **24/7 Fallout Radio:** Tune into Diamond City Radio, Radio New Vegas, Galaxy News Radio, and more with the `/radio` command.</li>
                <li>üéí **Full Economy:** Scavenge, craft, sell, and manage your inventory. Use chems like Jet for buffs, and collect rare bobbleheads.</li>
                <li>üèÜ **Profiles & Leaderboards:** Show off your stats, active effects, equipped gear, pet, and settlement with your personal `/profile`.</li>
            </ul>
        </section>

        <section class="gallery">
            <h2>Glimpses from the Wasteland</h2>
            <div class="gallery-container">
                <div class="gallery-item">
                    <a href="images/minigames.png" target="_blank"><img src="images/minigames.png" alt="Terminal Hacking and other games"></a>
                    <p>Engaging Minigames in Action!</p>
                </div>
                <div class="gallery-item">
                    <a href="images/radexample.png" target="_blank"><img src="images/radexample.png" alt="Using RadAway"></a>
                    <p>Curing Wasteland Radiation</p>
                </div>
                <div class="gallery-item">
                    <a href="images/radio.png" target="_blank"><img src="images/radio.png" alt="Radio Statistics"></a>
                    <p>Tuning into Wasteland Radio</p>
                </div>
                <div class="gallery-item">
                    <a href="images/shop.png" target="_blank"><img src="images/shop.png" alt="Item Shop"></a>
                    <p>Shopping for Wasteland Essentials</p>
                </div>
            </div>
            <p class="gallery-note">*All images are from the bot in action. Click an image to view the full version.</p>
        </section>
        
        <section class="demo">
            <h2>See It in Action!</h2>
            <video src="main.mp4" controls>
                Your browser does not support the video tag. 
            </video>
        </section>

        <section class="commands">
            <h2>Primary Commands</h2>
            <p>Here are some of the main commands to get you started (use <code>/help</code> in Discord for a full list):</p>
            <ul>
                <li><strong>/profile</strong> ‚Äì View your survivor stats, pet, settlement, and active effects.</li>
                <li><strong>/inventory</strong> ‚Äì Check your Pip-Boy for all your gear.</li>
                <li><strong>/power_armor</strong> ‚Äì View, equip, and manage your Power Armor suits.</li>
                <li><strong>/weapon</strong> ‚Äì View, equip, and manage your arsenal of weapons.</li>
                <li><strong>/scavenge</strong> ‚Äì Search the wasteland for supplies and loot!</li>
                <li><strong>/expedition start `hours`</strong> ‚Äì Send your dweller into the wasteland to find loot.</li>
                <li><strong>/settlement `sub-command`</strong> ‚Äì Manage all aspects of your personal settlement.</li>
                <li><strong>/pve_encounter `difficulty`</strong> ‚Äì Fight random wasteland enemies.</li>
                <li><strong>/nukelaunch start `location`</strong> ‚Äì Launch a nuke to trigger a world boss event.</li>
                <li><strong>/trade `recipient`</strong> ‚Äì Securely trade items and caps with another survivor.</li>
                <li><strong>/vending manage</strong> ‚Äì Add or remove items from your personal shop.</li>
                <li><strong>/browse_shops</strong> ‚Äì See a list of all active player shops.</li>
                <li><strong>/craft</strong> ‚Äì Turn your collected junk into useful items.</li>
                <li><strong>/sell</strong> ‚Äì Sell your unwanted goods to wasteland traders for caps.</li>
                <li><strong>/shop</strong> ‚Äì Browse and purchase items from the bot's shop.</li>
                <li><strong>/daily</strong> ‚Äì Claim your daily Bottlecap allowance.</li>
                <li><strong>/terminal</strong> ‚Äì Initiate the terminal hacking minigame.</li>
                <li><strong>/lockpick `difficulty`</strong> ‚Äì Use a bobby pin to attempt to pick a lock.</li>
                <li><strong>/blackjack `amount`</strong> ‚Äì Play a hand of Blackjack.</li>
                <li><strong>/slots</strong> ‚Äì Try your luck at the Atomic Slots machine.</li>
                <li><strong>/radio `station_name`</strong> ‚Äì Join a radio station in your current voice channel.</li>
                <li><strong>/leaderboard `category`</strong> ‚Äì See who's topping the charts.</li>
            </ul>
        </section>
        
        <section class="easteregg">
            <p>üïµÔ∏è <strong>Wasteland Wisdom:</strong> Always check your corners. A pile of seemingly useless junk might just be the components for your next handful of life-saving Bobby Pins. A well-placed bet on a fast Radroach can make your day!</p>
        </section>
    </main>

    <footer class="site-footer">
        <div class="legal-links">
            <a href="terms.html">Terms of Service</a> | <a href="privacy.html">Privacy Policy</a> | <a href="https://Im2Slothy.com" target="_blank">Developer's Website</a>
        </div>
        <p class="disclaimer">Vault-Tec Assistant is a fan-made project and is not affiliated with, endorsed, sponsored, or specifically approved by Bethesda Softworks LLC. Fallout¬Æ and Vault-Tec¬Æ are trademarks or registered trademarks of ZeniMax Media Inc. or its affiliates in the U.S. and/or other countries.</p>
    </footer>

<script>
    const API_URL = "/api/stats";

    async function fetchStats() {
        const commandsList = document.getElementById('popular-commands-list');
        const radioList = document.getElementById('station-popularity-list');
        const loadingCommands = document.getElementById('loading-commands');
        const loadingRadio = document.getElementById('loading-radio');

        try {
            const response = await fetch(API_URL);
            if (!response.ok) {
                throw new Error(`Network error: ${response.statusText}`);
            }

            const stats = await response.json();

            if (stats.popular_commands && stats.popular_commands.length > 0) {
                commandsList.innerHTML = ''; // Clear "loading"
                stats.popular_commands.forEach(command => {
                    const li = document.createElement('li');
                    li.innerHTML = `<b>/${command.command_name}</b>: ${command.usage_count} uses`;
                    commandsList.appendChild(li);
                });
            } else {
                loadingCommands.textContent = 'No command data yet.';
            }

            if (stats.station_popularity && stats.station_popularity.length > 0) {
                radioList.innerHTML = ''; // Clear "loading"
                stats.station_popularity.forEach(station => {
                    const li = document.createElement('li');
                    li.innerHTML = `<b>${station.station_name}</b>: ${station.listen_time_str}`;
                    radioList.appendChild(li);
                });
            } else {
                loadingRadio.textContent = 'No radio data yet.';
            }

        } catch (error) {
            console.error("Failed to fetch stats:", error);
            if (loadingCommands) loadingCommands.textContent = "Error: API is offline.";
            if (loadingRadio) loadingRadio.textContent = "Error: API is offline.";
        }
    }

    document.addEventListener('DOMContentLoaded', fetchStats);
</script>
</body>
</html>
